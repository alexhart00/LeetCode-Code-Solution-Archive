class Solution {
    public int maxSum(int[] nums) {
        int sumUniquePositives = 0;
        int maxNegative = Integer.MIN_VALUE;
        boolean hasPositive = false;
        Set<Integer> uniqueNums = new HashSet<>();

        for (int num : nums) {
            if (num > 0) {
                if (uniqueNums.add(num)) {
                    sumUniquePositives += num;
                }
                hasPositive = true;
            } else {
                maxNegative = Math.max(maxNegative, num);
            }
        }

        return hasPositive ? sumUniquePositives : maxNegative;
    }
}